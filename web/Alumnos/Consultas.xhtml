<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"

      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>
        <ui:composition template="./../Template/VistasMarcos/PlantillaAlumnos.xhtml">
            <ui:define name="content">
                <div class="content-wrapper">
                    <!-- Main content -->
                    <section class="content">
                        <p:growl id="mensajeGeneral" autoUpdate="true" showDetail="true" life="3000"/>
                        <p:panel id="panelPaciente" header="Paciente" style="margin-bottom:5px; font-size: 11px;" >
                            <h:panelGrid columns="15" cellpadding="10" >
                                <h:form id="formBusquedaPacienteFolio">
                                    <p:outputLabel value="Folio  "/><p:spacer width="10" height="10"/>
                                    <p:inputText id="folio" value="#{ConsultaPaciente.paciente.folio}"
                                                 required="true" requiredMessage="Ingrese el folio">
                                    <p:ajax event="keyup" listener="#{ConsultaPaciente.folioPaciente()}"  update=":formMostrarMaterias:tablaMostrarMaestros"></p:ajax>
                                    </p:inputText>

                                    <p:spacer width="10" height="10"/>

                                    <p:commandButton actionListener="#{ConsultaPaciente.folioPaciente()}" class="btn btn-info" value="Mostrar" update=":formMostrarMaterias:tablaMostrarMaestros"/>
                                </h:form>

                                <p:spacer width="350" height="10"/>
                                <h:form id="formBusquedaPacienteNombre">
                                    <p:outputLabel value="Nombre completo(Apellidos y nombres)  "/><p:spacer width="10" height="10"/>
                                    <p:inputText id="nombre" value="#{ConsultaPaciente.paciente.nombre}"
                                                 required="true" requiredMessage="Ingrese el nombre">
                                          <p:ajax event="keyup" listener="#{ConsultaPaciente.nombresPaciente()}"  update=":formMostrarMaterias:tablaMostrarMaestros"></p:ajax>

                                    </p:inputText>

                                    <p:spacer width="10" height="10"/>

                                    <p:commandButton actionListener="#{ConsultaPaciente.nombresPaciente()}" class="btn btn-info" value="Mostrar" update=":formMostrarMaterias:tablaMostrarMaestros"/>
                                </h:form>


                            </h:panelGrid>
                        </p:panel>

                        <h:form id="formMostrarMaterias">
                            <p:dataTable id="tablaMostrarMaestros" var="master" value="#{ConsultaPaciente.listPaciente}" rows="10" paginator="true"
                                         emptyMessage="No hay datos" style="font-size: 11px;">

                                <p:column headerText="Folio">
                                    <h:outputText id="idFolio" value="#{master.folio}"/>
                                </p:column>

                                <p:column headerText="Nombre">
                                    <h:outputText value="#{master.nombre}"/>
                                </p:column>

                                <p:column headerText="Fecha de nacimiento">
                                    <h:outputText value="#{master.fechaNacim}"/>
                                </p:column>

                                <p:column headerText="Edad">
                                    <h:outputText value="#{master.edad}"/>
                                </p:column>

                                <p:column headerText="Sexo">
                                    <h:outputText value="#{master.sexo}"/>
                                </p:column>

                                <p:column headerText="Estado civil">
                                    <h:outputText value="#{master.estadoCivil}"/>
                                </p:column>

                                <p:column headerText="Nivel de estudios">
                                    <h:outputText value="#{master.nivelEstudios}"/>
                                </p:column>

                                <p:column headerText="Fecha de registro">
                                    <h:outputText value="#{master.fechaRegistro}"/>
                                </p:column>

                                <p:column headerText="Consulta">
                                    <p:commandButton value="Nueva consulta" action="#{ConsultaPaciente.nuevaConsulta(master.id,master.folio,master.nombre)}" class="btn btn-info"></p:commandButton>
                                </p:column>
                                
                                <p:column headerText="Expediente">
                                    <p:commandButton value="Ver historial" action="#{ConsultaPaciente.verHistorial(master.id,master.nombre,master.folio)}" class="btn btn-info"></p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </section>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>
